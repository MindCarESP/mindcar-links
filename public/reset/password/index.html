<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Restablecer contraseña – MindCar</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    body { font-family: system-ui; background:#f3f4f6; padding:20px; }
    .card { max-width:420px; margin:50px auto; background:white; padding:28px;
            border-radius:18px; box-shadow:0 8px 24px rgba(0,0,0,.1); }
    input, button { width:100%; padding:12px; margin-top:10px; font-size:16px; }
    button { background:#2563eb; color:white; border:0; border-radius:8px; cursor:pointer; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    .msg { margin-top:14px; font-size:14px; }
  </style>
</head>
<body>

<div class="card">
  <h2 style="margin-top:0;">Nueva contraseña</h2>
  <p>Introduce una nueva contraseña para tu cuenta de MindCar.</p>

  <input type="password" id="newPass" placeholder="Nueva contraseña">
  <button id="submit">Cambiar contraseña</button>

  <p id="status" class="msg"></p>
</div>

<script>
  const client = supabase.createClient("https://TU-PROJECT-URL.supabase.co", "TU-PUBLIC-ANON-KEY");

  const btn = document.getElementById("submit");
  const status = document.getElementById("status");

  btn.onclick = async () => {
    const password = document.getElementById("newPass").value.trim();
    if (password.length < 6) {
      status.textContent = "La contraseña debe tener mínimo 6 caracteres.";
      status.style.color = "red";
      return;
    }

    btn.disabled = true;
    status.textContent = "Actualizando contraseña...";
    status.style.color = "#374151";

    const { error } = await client.auth.updateUser({ password });

    if (error) {
      status.textContent = "Error: " + error.message;
      status.style.color = "red";
      btn.disabled = false;
    } else {
      status.textContent = "Contraseña cambiada correctamente. Ya puedes iniciar sesión.";
      status.style.color = "green";
    }
  };
</script>

</body>
</html>
